// https://d3js.org/d3-format/ v1.4.2 Copyright 2019 Mike Bostock
!function(t,n){"object"==typeof exports&&"undefined"!=typeof module?n(exports):"function"==typeof define&&define.amd?define(["exports"],n):n((t=t||self).d3=t.d3||{})}(this,function(t){"use strict";function n(t,n){if((r=(t=n?t.toExponential(n-1):t.toExponential()).indexOf("e"))<0)return null;var r,i=t.slice(0,r);return[i.length>1?i[0]+i.slice(2):i,+t.slice(r+1)]}function r(t){return(t=n(Math.abs(t)))?t[1]:NaN}function i(t,n){return function(i,e){return Math.max(0,3*Math.max(t,Math.min(n,Math.floor(r(e)/3)))-r(Math.abs(i)))}}var e=i(-8,8),o=i(0,4);var a,u=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function c(t){if(!(n=u.exec(t)))throw new Error("invalid format: "+t);var n;return new s({fill:n[1],align:n[2],sign:n[3],symbol:n[4],zero:n[5],width:n[6],comma:n[7],precision:n[8]&&n[8].slice(1),trim:n[9],type:n[10]})}function s(t){this.fill=void 0===t.fill?" ":t.fill+"",this.align=void 0===t.align?">":t.align+"",this.sign=void 0===t.sign?"-":t.sign+"",this.symbol=void 0===t.symbol?"":t.symbol+"",this.zero=!!t.zero,this.width=void 0===t.width?void 0:+t.width,this.comma=!!t.comma,this.precision=void 0===t.precision?void 0:+t.precision,this.trim=!!t.trim,this.type=void 0===t.type?"":t.type+""}function f(t,r,i,e){var o=n(t,r);if(!o)return t+"";var u=o[0],c=o[1],s=c-(a=3*Math.max(i,Math.min(e,Math.floor(c/3))))+1,f=u.length;return s===f?u:s>f?u+new Array(s-f+1).join("0"):s>0?u.slice(0,s)+"."+u.slice(s):"0."+new Array(1-s).join("0")+n(t,Math.max(0,r+s-1))[0]}function h(t,r){var i=n(t,r);if(!i)return t+"";var e=i[0],o=i[1];return o<0?"0."+new Array(-o).join("0")+e:e.length>o+1?e.slice(0,o+1)+"."+e.slice(o+1):e+new Array(o-e.length+2).join("0")}c.prototype=s.prototype,s.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};var l={"%":function(t,n){return(100*t).toFixed(n)},b:function(t){return Math.round(t).toString(2)},c:function(t){return t+""},d:function(t){return Math.round(t).toString(10)},e:function(t,n){return t.toExponential(n)},f:function(t,n){return t.toFixed(n)},g:function(t,n){return t.toPrecision(n)},K:function(t){return function(n,r){return f(n,r,0,t.length-1)}},o:function(t){return Math.round(t).toString(8)},p:function(t,n){return h(100*t,n)},r:h,s:function(t,n){return f(t,n,-8,8)},X:function(t){return Math.round(t).toString(16).toUpperCase()},x:function(t){return Math.round(t).toString(16)}};function d(t){return t}var m,p=Array.prototype.map,g=["y","z","a","f","p","n","Âµ","m","","k","M","G","T","P","E","Z","Y"],v=["","K","M","B","T"];function y(t){var n,i,e=void 0===t.grouping||void 0===t.thousands?d:(n=p.call(t.grouping,Number),i=t.thousands+"",function(t,r){for(var e=t.length,o=[],a=0,u=n[0],c=0;e>0&&u>0&&(c+u+1>r&&(u=Math.max(1,r-c)),o.push(t.substring(e-=u,e+u)),!((c+=u+1)>r));)u=n[a=(a+1)%n.length];return o.reverse().join(i)}),o=void 0===t.currencyAbbreviations?v:t.currencyAbbreviations,u=void 0===t.currency?"":t.currency[0]+"",s=void 0===t.currency?"":t.currency[1]+"",f=void 0===t.decimal?".":t.decimal+"",h=void 0===t.numerals?d:function(t){return function(n){return n.replace(/[0-9]/g,function(n){return t[+n]})}}(p.call(t.numerals,String)),m=void 0===t.percent?"%":t.percent+"",y=void 0===t.minus?"-":t.minus+"",M=void 0===t.nan?"NaN":t.nan+"";function x(t){var n=(t=c(t)).fill,r=t.align,i=t.sign,d=t.symbol,p=t.zero,v=t.width,x=t.comma,b=t.precision,w=t.trim,P=t.type;"n"===P?(x=!0,P="g"):l[P]||(void 0===b&&(b=12),w=!0,P="g"),(p||"0"===n&&"="===r)&&(p=!0,n="0",r="=");var S="$"===d?u:"#"===d&&/[boxX]/.test(P)?"0"+P.toLowerCase():"",A="$"===d?s:/[%p]/.test(P)?m:"",j=l[P],k=/[defgKprs%]/.test(P);function z(t){var u,c,s,l=S,d=A;if("c"===P)d=j(t)+d,t="";else{var m=(t=+t)<0;if(t=isNaN(t)?M:j(Math.abs(t),b),w&&(t=function(t){t:for(var n,r=t.length,i=1,e=-1;i<r;++i)switch(t[i]){case".":e=n=i;break;case"0":0===e&&(e=i),n=i;break;default:if(e>0){if(!+t[i])break t;e=0}}return e>0?t.slice(0,e)+t.slice(n+1):t}(t)),m&&0==+t&&(m=!1),l=(m?"("===i?i:y:"-"===i||"("===i?"":i)+l,"s"===P?d=g[8+a/3]+d:"K"===P&&(d=o[a/3]+d),d+=m&&"("===i?")":"",k)for(u=-1,c=t.length;++u<c;)if(48>(s=t.charCodeAt(u))||s>57){d=(46===s?f+t.slice(u+1):t.slice(u))+d,t=t.slice(0,u);break}}x&&!p&&(t=e(t,1/0));var z=l.length+t.length+d.length,K=z<v?new Array(v-z+1).join(n):"";switch(x&&p&&(t=e(K+t,K.length?v-d.length:1/0),K=""),r){case"<":t=l+t+d+K;break;case"=":t=l+K+t+d;break;case"^":t=K.slice(0,z=K.length>>1)+l+t+d+K.slice(z);break;default:t=K+l+t+d}return h(t)}return"K"===P&&(j=j(o)),b=void 0===b?"K"===P?3:6:/[gKprs]/.test(P)?Math.max(1,Math.min(21,b)):Math.max(0,Math.min(20,b)),z.toString=function(){return t+""},z}function b(t,n,i){return function(e,o){var a=x(((e=c(e)).type="f",e)),u=3*Math.max(n,Math.min(i,Math.floor(r(o)/3))),s=Math.pow(10,-u),f=t[-1*n+u/3];return function(t){return a(s*t)+f}}}var w=b(g,-8,8);return{format:x,formatCurrencyPrefix:b(o,0,o.length-1),formatPrefix:w}}function M(n){return m=y(n),t.format=m.format,t.formatCurrencyPrefix=m.formatCurrencyPrefix,t.formatPrefix=m.formatPrefix,m}M({decimal:".",thousands:",",grouping:[3],currency:["$",""],minus:"-"}),t.FormatSpecifier=s,t.currencyPrecisionPrefix=o,t.formatDefaultLocale=M,t.formatLocale=y,t.formatSpecifier=c,t.precisionFixed=function(t){return Math.max(0,-r(Math.abs(t)))},t.precisionPrefix=e,t.precisionRound=function(t,n){return t=Math.abs(t),n=Math.abs(n)-t,Math.max(0,r(n)-r(t))+1},Object.defineProperty(t,"__esModule",{value:!0})});
